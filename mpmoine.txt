Xparse.py:# mpmoine_amelioration: ajout de l'argument 'path_parse' a la fonction read_src pour pouvoir lire les context.xml d'Arnaud
Xparse.py:            # mpmoine_amelioration:read_src: ajout de path_parse pour acceder aux context_<X>.xml
Xparse.py:            # mpmoine_correction: read_src: gestion du type de codage XML pour pouvoir lire les context.xml d'Arnaud
Xparse.py:# mpmoine_amelioration: ajout de l'argument 'path_parse' a la fonction init_context
Xparse.py:    # mpmoine_merge_dev2_v0.12:init_context: ajout de "./parse/" pour acceder a iodef.xml 
Xparse.py:    # mpmoine_amelioration:init_context: ajout de l'argument 'path_parse' a la fonction read_src
dr2xml.py:version="mpmoine-dev3 = mpmoine-dev2 merged with senesi-dev-v0.12 + updates untill 05/05/2017"
dr2xml.py:# mpmoine_merge_dev2_v0.12: posixpath.dirname ne marche pas chez moi
dr2xml.py:# mpmoine_zoom_modif: import simple_Dim
dr2xml.py:# mpmoine_last_modif: dr2xml.py: ajout import de cmipFreq2xiosFreq
dr2xml.py:# mpmoine_last_modif:wr: ajout de l'argument num_type
dr2xml.py:# mpmoine_zoom_modif:wr: ajout de l'argument out (car fonction remontee d un niveau)
dr2xml.py:# mpmoine_WIP_update: WIP doc v6.2.3 - Apr. 2017: <time_range> format is frequency-dependant => new function 'freq2datefmt'
dr2xml.py:    #mpmoine_TBD: supprimer "hr" selon reponse de D. Nadeau a l'issue https://github.com/PCMDI/cmip6-cmor-tables/issues/59
dr2xml.py:    # mpmoine_amelioration:write_xios_file_def: gestion ici des attributs pour lesquels on a recupere des chaines vides (" " est Faux mais est ecrit " "")
dr2xml.py:        # mpmoine_correction:write_xios_file_def: si on a defini un label non ambigu alors on l'untilise comme alias (i.e. le field_ref) 
dr2xml.py:        # mpmoine_correction:write_xios_file_def: et pour l'alias seulement (le nom de variable dans le nom de fichier restant svar.label)
dr2xml.py:        # mpmoine_correction:write_xios_file_def: suppression des terminaisons en "Clim" pour l'alias (i.e. le field_ref) le cas echeant
dr2xml.py:            # mpmoine_zoom_modif:write_xios_file_def: dans le pingfile, on attend plus les alias complets  des variables (CMIP6_<label>) mais les alias reduits (CMIP6_<lwps>)
dr2xml.py:            # mpmoine_zoom_modif:write_xios_file_def: => creation de alias_ping
dr2xml.py:            # mpmoine_correction:write_xios_file_def: si on a defini un label non ambigu alors on l'untilise comme ping_alias (i.e. le field_ref) 
dr2xml.py:                # mpmoine_skipped_modif: write_xios_file_def: on classe les skipped_vars par table => skipped_vars_per_table (pour avoir plus d'info au print) 
dr2xml.py:    # mpmoine_WIP_update:write_xios_file_def: WIP doc v6.2.3 - Apr. 2017: cf recommendation in note 16 for 'variant_info'
dr2xml.py:    # mpmoine_last_modif:write_xios_file_def: mip_era n'est plus toujours 'CMIP6' (par ex. 'PRIMAVERA')
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: CMOR3.2.2 impose 'None' (et non 'none') comme default value de sub_experiment_id
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: CMOR3.2.3 impose 'none'(et non 'None' !) comme default value de sub_experiment_id
dr2xml.py:    # mpmoine_TBD : change grid_label depending on shape (sites, transects)
dr2xml.py:    # mpmoine_expname:write_xios_file_def: es noms d'expe dans la DR ne sont pas les meme que dans le CV CMIP6
dr2xml.py:            # mpmoine_last_modif:write_xios_file_def: provisoire, laisser passer cette erreur tant que le
dr2xml.py:            # mpmoine_last_modif:write_xios_file_def: CV_CMIP6 et celui de la DR ne sont pas concordants
dr2xml.py:    # mpmoine_WIP_update:write_xios_file_def: WIP doc v6.2.3 - Apr. 2017: <time_range>="N1-N2" (instead of "N1_N2")
dr2xml.py:    # mpmoine_WIP_update:write_xios_file_def: WIP doc v6.2.3 - Apr. 2017: <time_range> format is frequency dependant
dr2xml.py:    # mpmoine_WIP_update:write_xios_file_def: WIP doc v6.2.3 - Apr. 2017: [_<time_range>] omitted if frequency is "fx"; a suffix "-clim" is added if climatology
dr2xml.py:    # mpmoine_last_modif:write_xios_file_def: Maintenant, dans le cas type='perso', table='NONE'. On ne doit donc pas compter sur le table2freq pour recuperer
dr2xml.py:    # mpmoine_last_modif:write_xios_file_def: la frequence en convention xios => fonction cmipFreq2xiosFreq
dr2xml.py:    # mpmoine_next_modif: write_xios_file_def: passage de 'context' en argument de split_frequency_for_variable pour recuperer le model_timestep
dr2xml.py:    # mpmoine_amelioration:write_xios_file_def: ajout de 'ts_prefix' et de time_series="only" => finalement non, et ts_prefix dans le 'name' car on gere nous-meme les time-series
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: ajout de 'split_freq_format' pour se coformer a CMOR3.0.3 
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: ajout de time_counter="exclusive"
dr2xml.py:    # mpmoine_WIP_update:write_xios_file_def: WIP doc v6.2.3 - Apr. 2017: suppression de 'project_id' pas requis pour CMIP6 (remplace par 'activity_id' et 'mip_era')
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: ecriture de forcing_index en integer requis par la version CMOR3.2.3
dr2xml.py:    # mpmoine_last_modif: Maintenant, dans le cas type='perso', table='NONE'. On ne doit donc pas compter sur table2freq pour recuperer la frequence
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: ecriture de  initialization_index en integer requis par la version CMOR3.2.3 
dr2xml.py:    # mpmoine_cmor_update: 'licence' est trop long... passe pas le CMIP6-Checker => 'institution_id' au lieu de inst='institution'
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: changement des defaults values pour les parent_<XXX>: default en dur remplace par la valeur pour <XXX> 
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: et utilisation de l'attribut optionnel 'default' de la fonction 'wr' plutot que sset.get avec une default
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: ecriture de physics_index en integer requis par la version CMOR3.2.3 
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: changement des valeurs de 'product' requis par la version CMOR3.2.3
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: ecriture de realization_index en integer requis par la version CMOR3.2.3
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: CMOR3.2.2 impose 'None' (et non 'none') pour sub_experiment
dr2xml.py:    # mpmoine_cmor_update:write_xios_file_def: CMOR3.2.3 impose 'none' (et non 'None' !)pour sub_experiment
dr2xml.py:    # mpmoine_WIP_update:write_xios_file_def: WIP doc v6.2.3 - Apr. 2017: cf recommendation in note 16 for 'variant_info'
dr2xml.py:    # mpmoine_zoom_modif:write_xios_file_def: appel a create_xios_aux_elmts_defs (anc. create_xios_field_ref) descendu ici
dr2xml.py:        # mpmoine_correction:write_xios_file_def: suppression du niveau 'field_group'
dr2xml.py: # mpmoine_last_modif:wrv: ajout de l'argument num_type
dr2xml.py:# mpmoine_zoom_modif: renommage de la fonction 'create_xios_field_ref' en 'create_xios_aux_elmts_defs'
dr2xml.py:# mpmoine_zoom_modif: renommage de la fonction 'create_xios_field_ref' en 'create_xios_aux_elmts_defs'
dr2xml.py:    # mpmoine_zoom_modif:create_xios_aux_elmts_defs: on supprime l'usage de netxvar
dr2xml.py:    # mpmoine_zoom_modif:create_xios_aux_elmts_defs: recup de lwps
dr2xml.py:    # TBD Should handle singletons here => mpmoine_note: la mecanique des zoom/union couvre aussi les dim verticale singleton
dr2xml.py:    # mpmoine_zoom_modif:create_xios_aux_elmts_defs: ajout du cas 'XY-na' pour capturer les dimensions singleton
dr2xml.py:        # mpmoine_last_modif:create_xios_aux_elmts_defs: on recupere maintenant 'dimids' depuis svar
dr2xml.py:        # mpmoine_future_modif:create_xios_aux_elmts_defs: on utilise maintenant sv.sdims pour analyser les dimension
dr2xml.py:        # mpmoine_question: je ne comprend pas l'usage de nextvar... A priori on ne peut pas avoir plus d'une dimension verticale ?
dr2xml.py:                # mpmoine_zoom_modif:create_xios_aux_elmts_defs: on supprime l'usage de netxvar
dr2xml.py:                # mpmoine_zoom_modif:create_xios_aux_elmts_defs: passage par 2 niveaux de field id auxiliaires rebond (alias et alias2)
dr2xml.py:                    # mpmoine_note: cas d'une variable definie grace a 2 axis (zoom+union)
dr2xml.py:                    # mpmoine_note: cas d'une variable definie grace a seul axis (non zoom)
dr2xml.py:                if not alias1 in pingvars: # mpmoine_note: maintenant on est toujours dans ce cas (e.g. 'CMPI6_hus7h_plev7h' plus jamais ecrit dans le ping)
dr2xml.py:                    # mpmoine_future_modif:create_xios_aux_elmts_defs: suppression de l'argument 'field_defs' de create_axis_def qui n'est pas utilise
dr2xml.py:                    # mpmoine_merge_dev2_v0.12:create_xios_aux_elmts_defs: j'ai change nextvar en alias
dr2xml.py:                    # mpmoine_merge_dev2_v0.12:create_xios_aux_elmts_defs: nouvelle une fonction 'create_grid_def' car utilisee aussi par 'create_xios_grids_for_plev_unions'
dr2xml.py:                    # mpmoine_correction:create_xios_aux_elmts_defs: il faut creer un grid aussi autour des zoom axis
dr2xml.py:                    # mpmoine_correction:create_xios_aux_elmts_defs: alias_ping au lieu de alias en arg de create_grid_def
dr2xml.py:                    # mpmoine_correction:create_xios_aux_elmts_defs: passage par grid_ref aussi pour les varaibles definies sur des zoom
dr2xml.py:                    if sd.is_zoom_of: # mpmoine_note: cas variable definie grace a 2 axis_def (union+zoom)
dr2xml.py:                        # mpmoine_merge_dev2_v0.12:create_xios_aux_elmts_defs: remplacement axis_ref=sd.is_zoom_of -> grid_ref="grid_"+sd.is_zoom_of
dr2xml.py:                    else: # mpmoine_note: cas variable definie grace a seul axis_def (non union+zoom)
dr2xml.py:                        # mpmoine_merge_dev2_v0.12:create_xios_aux_elmts_defs: remplacement axis_ref=sd.label -> grid_ref=grid_id
dr2xml.py:                        # mpmoine_correction:create_xios_aux_elmts_defs: alias1  au lieu de alias pour l'ecriture de field_defs
dr2xml.py:                # mpmoine_note: voir en desactivant les zooms si c'est ok                    
dr2xml.py:    # mpmoine_alelioration:create_xios_aux_elmts_defs: lever une erreur quand on ne trouve pas une operation temporelle xios correcte
dr2xml.py:    # mpmoine_correction:create_xios_aux_elmts_defs: alias1  au lieu de alias pour l'ecriture de end_field_defs
dr2xml.py:    # mpmoine_cmor_update:create_xios_aux_elmts_defs: les tables CMOR demandent les champs en 'float' ou 'real' => ajout de prec="4"
dr2xml.py:    # mpmoine_last_modif:create_xios_aux_elmts_defs: ajout de missing_value pour satisfaire le standard attendu par CMOR
dr2xml.py:    # mpmoine_last_modif:create_xios_aux_elmts_defs:  missing_valueS pour l'instant pour que ça passe le CMORchecker (issue)
dr2xml.py:    # mpmoine_note: 'missing_value(s)' normalement plus necessaire, a verifier
dr2xml.py:# mpmoine_last_modif:gather_AllSimpleVars: nouvelle fonction qui rassemble les operations select_CMORvars_for_lab et read_homeVars_list. 
dr2xml.py:# mpmoine_last_modif:gather_AllSimpleVars: Necessaire pour create_ping_file qui doit tenir compte des extra_Vars
dr2xml.py:    # mpmoine_amelioration:generate_file_defs: ajout de l'argument 'path_parse' a la fonction init_context
dr2xml.py:    # mpmoine_skipped_modif:generate_file_defs: skipped_vars (liste) change en skipped_vars_per_table (dictionnaire)
dr2xml.py:                # mpmoine_last_modif:generate_file_defs: patch provisoire pour retirer les  svars qui n'ont pas de spatial_shape 
dr2xml.py:                # mpmoine_last_modif:generate_file_defs: (cas par exemple de 'hus' dans table '6hrPlev' => spid='__struct_not_found_001__')
dr2xml.py:                # mpmoine_next_modif: generate_file_defs: exclusion de certaines spatial shapes (ex. Polar Stereograpic Antarctic/Groenland)
dr2xml.py:                    # mpmoine_future_modif:generate_file_defs: juste un peu plus de printout...
dr2xml.py:            # mpmoine_last_modif:generate_file_defs: patch provisoire pour retirer les  svars qui n'ont pas de spatial_shape 
dr2xml.py:            # mpmoine_last_modif:generate_file_defs: (cas par exemple de 'hus' dans table '6hrPlev' => spid='__struct_not_found_001__')
dr2xml.py:            # mpmoine_next_modif: generate_file_defs: exclusion de certaines spatial shapes (ex. Polar Stereograpic Antarctic/Groenland)
dr2xml.py:    # mpmoine_zoom_modif:generate_file_defs: build axis defs of plevs unions
dr2xml.py:        # mpmoine_merge_dev2_v0.12:generate_file_defs: on recupere maintenant non seulement les union_axis_defs mais aussi les union_grid_defs
dr2xml.py:        # mpmoine_merge_dev2_v0.12:generate_file_defs: initialisation de grid_defs
dr2xml.py:        # mpmoine_zoom_modif:generate_file_defs: on ecrit maintenant les axis defs pour les unions
dr2xml.py:        # mpmoine_zoom_amelioration:generate_file_defs: usage de 'use_union_zoom'
dr2xml.py:        # mpmoine_merge_dev2_v0.12:generate_file_defs: ecriture des grid_defs
dr2xml.py:        # mpmoine_merge_dev2_v0.12:generate_file_defs: on ecrit maintenant les grid defs pour les unions
dr2xml.py:        # mpmoine_zoom_amelioration:generate_file_defs: usage de 'use_union_zoom'
dr2xml.py:    # mpmoine_petitplus:generate_file_defs: pour sortir des stats sur ce que l'on sort reelement
dr2xml.py:# mpmoine_petitplus: nouvelle fonction print_SomeStats (plus d'info sur les skipped_vars, nbre de vars / (shape,freq) )
dr2xml.py:# mpmoine_future_modif:create_axis_def: suppression de l'argument 'field_defs' qui n'est pas utilise
dr2xml.py:# mpmoine_future_modif:create_axis_def: suppression de l'argument 'field_defs' qui n'est pas utilise
dr2xml.py:    # mpmoine_future_modif:create_axis_def: plusieurs modifs car on passe maintenant sdim en argument et non dim_name_or_obj
dr2xml.py:    # mpmoine_zoom_modif:create_axis_def: nbre de valeurs de l'axe determine aussi si on est en dim singleton
dr2xml.py:        # mpmoine_future_modif: je vire le separateur " ", pour regler le pb des " " successifs
dr2xml.py:    # mpmoine_zoom_modif:create_axis_def: traitement du cas non zoom (classique, comme avant)
dr2xml.py:            # mpmoine_future_modif:create_axis_def: je supprime le -1 pour n_glo car regle avec rstrip/split()
dr2xml.py:            # mpmoine_correction:create_axis_def: n_glo->(n_glo-1)
dr2xml.py:    # mpmoine_zoom_modif:create_axis_def: traitement du cas zoom
dr2xml.py:        # mpmoine_correction:create_axis_def:  correction syntaxe begin du zoom
dr2xml.py:# mpmoine_merge_dev2_v0.12: nouvelle fonction create_grid_def
dr2xml.py:    # mpmoine_correction:create_grid_def:  si, il faut generer une grille autour des axes de zoom aussi
dr2xml.py:        grid_string+='\n\t<domain domain_ref="%s"/>'%"domain_atm" # mpmoine_note: attention, en dur !
dr2xml.py:        grid_string+='\n\t<domain domain_ref="%s"/>'%"domain_atm" # mpmoine_note: attention, en dur !
dr2xml.py:# mpmoine_zoom_modif: nouvelle fonction 'create_xios_axis_for_plevs_unions'
dr2xml.py:# mpmoine_merge_dev2_v0.12: 'create_xios_axis_for_plevs_unions' renomee en 'create_xios_axis_and_grids_for_plevs_unions'
dr2xml.py:            # mpmoine_note: couvre les dimensions verticales de type 'plev7h' ou 'p850'
dr2xml.py:                    # mpmoine_note: on reecrase les attributs de sdim_union à chaque nouveau plev. Pas utile mais
dr2xml.py:                    # mpmoine_note: c'est la facon la plus simple de faire
dr2xml.py:        # mpmoine_further_zoom_modif:create_xios_axis_for_plevs_unions: correction du tri des niveaux de pression sur les axes d'union
dr2xml.py:        # mpmoine_merge_dev2_v0.12: maintenant on doit non seulement creer les axes d'union mais aussi les grid les englobant
dr2xml.py:    # mpmoine_future_modif: isVertDim: on utilise maintenant sv.sdims pour analyser les dimensions
dr2xml.py:        # mpmoine_correction:analyze_cell_time_method: ajout de operation="average" pour "time: mean where sea_ice"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where floating_ice_shelf"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where grounded_ice_sheet"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where ice_sheet"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where sea_ice_melt_pound"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where landuse"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where crops"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where natural_grasses"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where shrubs"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where trees"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas "time: mean where vegetation"
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas 'Maximum Hourly Rate'
dr2xml.py:        # mpmoine_correction: on utilise 'accumulate' quand un "time: sum" est demande
dr2xml.py:    # mpmoine_correction:analyze_cell_time_method: ajout du cas sans operation temporelle (champs fixes)
dr2xml.py:# mpmoine_amelioration: ajout argument 'path_special' a la fonction pingFileForRealmsList
dr2xml.py:    # mpmoine_future_modif:pingFileForRealmsList: on s'appuie sur le mipVar label (label_without_area) et non plus le cmorVar label
dr2xml.py:    # mpmoine_zoom_modif:pingFileForRealmsList: on s'appuie sur le label_without_psuffix et non plus le label_without_area
dr2xml.py:        # mpmoine_future_modif:pingFileForRealmsList: on s'appuie sur le mipVar label (label_without_area) et non plus le cmorVar label
dr2xml.py:        # mpmoine_zoom_modif:pingFileForRealmsList: on s'appuie sur le label_without_psuffix et non plus le label_without_area
dr2xml.py:            # mpmoine_future_modif:pingFileForRealmsList: on s'appuie sur le mipVar label (label_without_area) et non plus le cmorVar label
dr2xml.py:            # mpmoine_zoom_modif:pingFileForRealmsList: on s'appuie sur le label_without_psuffix et non plus le label_without_area
dr2xml.py:    # mpmoine_future_modif:pingFileForRealmsList: typo 'filneme' -> 'filename'
dr2xml.py:    # mpmoine_amelioration:pingFileForRealmsList:: ajout argument 'path_special' a la fonction read_special_fields_defs + protection si path_special existe
dr2xml.py:            # mpmoine_future_modif:pingFileForRealmsList: pour le field_id du pingfile on s'appuie sur le 'label_without_psuffix' et non plus le label complet
dr2xml.py:            # mpmoine_correction:pingFileForRealmsList: pour le field_id du pingfile on prend le label non ambigu s'il existe
dr2xml.py:            # mpmoine_amelioration:pingFileForRealmsList: protection si specials existe
dr2xml.py:                    # mpmoine_last_modif: svar en argument de highest_rank et non pas seulement son label_without_area
dr2xml.py:                    # mpmoine_zoom_modif:pingFileForRealmsList: on s'appuie sur le label_without_psuffix et non plus le label_without_area
dr2xml.py:                    # mpmoine_future_modif:pingFileForRealmsList: on s'appuie sur le mipVar label (label_without_area) et non plus le cmorVar label
dr2xml.py:                    # mpmoine_zoom_modif:pingFileForRealmsList: on s'appuie sur le label_without_psuffix et non plus le label_without_area
dr2xml.py:        # mpmoine_amelioration:pingFileForRealmsList: protection si path_special existe
dr2xml.py:                # mpmoine_amelioration:pingFileForRealmsList: ajout argument 'path_special' a la fonction copy_obj_from_DX_file
dr2xml.py:# mpmoine_amelioration: ajout argument 'path_special' a la fonction copy_obj_from_DX_file
dr2xml.py:            # mpmoine_amelioration:opy_obj_from_DX_file: ajout argument 'path_special' a la fonction DX_defs_filename
dr2xml.py:# mpmoine_amelioration: ajout argument 'path_special' a la fonction DX_defs_filename
dr2xml.py:# mpmoine_future_modif: renommage de la fonction 'field_defs' en 'get_xml_childs'
dr2xml.py:# mpmoine_future_modif: renommage de la fonction 'read_defs' en 'read_xml_elmt_or_attrib'
dr2xml.py:# mpmoine_amelioration: ajout de l'argument 'path_special' a la fonction read_special_field_defs
dr2xml.py:            # mpmoine_amelioration:read_special_fields_defs: ajout de l'argument 'path_special' a la fonction DX_defs_filename
dr2xml.py:# mpmoine_last_modif:highest_rank: svar en argument et non pas seulement son label_without_area
dr2xml.py:    # mpmoine_last_modif:highest_rank: pour recuperer le label_without_area
dr2xml.py:                        # mpmoine_last_modif:highest_rank:  pour corriger l'erreur "TypeError: cannot concatenate 'str' and 'dreqItem_CoreAttributes' objects"
dr2xml.py:                # mpmoine_last_modif:highest_rank:  pour corriger l'erreur "TypeError: cannot concatenate 'str' and 'dreqItem_CoreAttributes' objects"
dr2xml.py:            # mpmoine_last_modif:highest_rank: Pour recuperer le spatial_shp pour le cas de variables qui n'ont pas un label CMORvar de la DR (ex. HOMEvar ou EXTRAvar)
dr2xml.py:        # mpmoine_future_modif:highest_rank: test shape =/ None, sinon on se retrouve avec shapes=liste de None et 1 liste de None n'est pas Faux
dr2xml.py:    # mpmoine_correction:make_source_string: pour lire correctement le fichier 'CMIP6_source_id.json'
grids.py:        #mpmoine_next_modif:field_size: nb_lat au lieu de nblat (vu par Arnaud)
grids.py:        # mpmoine_correction:field_size: 'na-A' s'applique a des dims (alevel)+spectband mais aussi a (alevel,site) => *nb_cosp_sites
grids.py:# mpmoine_last_modif:split_frequency_for_variable: suppression de l'argument table
grids.py:# mpmoine_next_modif:split_frequency_for_variable: passage de 'context' en argument pour recuperer le model_timestep
grids.py:    # mpmoine_last_modif:split_frequency_for_variable: on ne passe plus par table2freq pour recuperer 
grids.py:    # mpmoine_last_modif:split_frequency_for_variable: la frequence de la variable mais par svar.frequency
grids.py:        # mpmoine_next_modif:split_frequency_for_variable: passage de 'model_timestep' en argument de timesteps_per_freq_and_duration
grids.py:            # mpmoine_next_modif:split_frequency_for_variable: passage de 'model_timestep' en argument de timesteps_per_freq_and_duration
grids.py:                # mpmoine_next_modif:split_frequency_for_variable: passage de 'model_timestep' en argument de timesteps_per_freq_and_duration
grids.py:                    # mpmoine_last_modif:split_frequency_for_variable: on ne passe plus par table2freq pour recuperer
grids.py:                    # mpmoine_last_modif:split_frequency_for_variable: la frequence de la variable mais par svar.frequency
grids.py:      # mpmoine_zoom_modif:split_frequency_for_variable: print de warning si on arrive pas a calculer une split_freq
grids.py:# mpmoine_next_modif: ajout de 'model_timestep' en argument de timesteps_per_freq_and_duration
grids.py:    # mpmoine_next_modif:timesteps_per_freq_and_duration: ajour de la frequence 'hr'
grids.py:    #mpmoine_next_modif:timesteps_per_freq_and_duration: ajout des cas frequence 'subhr' et 'dec'
table2freq.py:    # mpmoine_next_modif: frequence CMIP6 pour AERhr = 'hr' et non '1hr'
table2freq.py:    # mpmoine_next_modif: table2freq: frequence pour les tables subhr
table2freq.py:    # mpmoine_future_modif: table2freq: la syntaxe xios pour le subhr est '1ts' et non 'instant' (vu par Arnaud)
table2freq.py:     # mpmoine_future_modif: table2freq: la syntaxe xios pour 1hr est '1h' et non '1hr'
table2freq.py:    # mpmoine_next_modif: table2freq: frequence pour les tables subhr
table2freq.py:    # mpmoine_future_modif: table2freq: la syntaxe pour le subhe est '1ts' et non 'instant' (vu par Arnaud)
table2freq.py:    # mpmoine_last_modif: table2freq: ajout des tables Primavera
table2freq.py:    #mpmoine_last_modif: table2splitfreq: ajout des tables Primavera
table2freq.py:# mpmoine_last_modif: table2freq.py: nouveau: cmipFreq2xiosFreq
vars.py:# mpmoine_last_modif:simple_CMORvar: ajout des attributs 'mip_era', 'missing' et 'dimids'
vars.py:# mpmoine_future_modif:simple_CMORvar: ajout de l'attribut 'label_without_psuffix' et suppresion de l'attribut dimids
vars.py:# mpmoine_correction:simple_CMORvar: ajout de l'attribut 'label_non_ambiguous' 
vars.py:# mpmoine_future_modif: nouvelle classe simple_Dim
vars.py:# mpmoine_future_modif:simple_Dim: ajout de l'attribut 'is_zoom_of'
vars.py:# mpmoine_zoom_modif:simple_Dim: ajout de l'attribut 'zoom_label'
vars.py:        # mpmoine_union_optim: simple_Dim: ajout de l'attribut 'is_union_for'
vars.py:# mpmoine_future_modif: liste des suffixes de noms de variables reperant un ou plusieurs niveaux pression
vars.py:# mpmoine_last_modif: vars.py: spid2label et tmid2label ne sont plus utilises
vars.py:# mpmoine_last_modif:read_homeVars_list: fonction modifiee pour accepter des extra_Tables
vars.py:                # mpmoine_future_modif:read_homeVars_list: valorisation de home_var.label_without_psuffix
vars.py:# mpmoine_last_modif:read_extraTable: nouvelle fonction pour lire les extra_Tables
vars.py:        # mpmoine_future_modif:dims2shape: ajout a la main des correpondances dims->shapes Primavera qui ne sont pas couvertes par la DR
vars.py:        # mpmoine_note: attention, il faut mettre a jour dim2shape a chaque fois qu'une nouvelle correpondance est introduite
vars.py:        # mpmoine_note: attention, dans les extra-Tables
vars.py:        # mpmoine_note: provisoire, XY-P12 juste pour exemple
vars.py:        # mpmoine_zoom_modif:dims2shape:: ajout de XY-P23 qui a disparu de la DR-00.00.04 mais est demande dans les tables Primavera
vars.py:        # mpmoine_zoom_modif:dims2shape:: ajout de XY-P10 qui n'est pas dans la DR mais demande dans les tables Primavera
vars.py:    # mpmoine_correction:read_extraTable: Solution de Martin Juckes du 04/05/2017 en utilisant cids necessaire a partir de la version 01.00.08 => plus besoin de la fonction 'cids2singlev'
vars.py:                    #if c.axis == 'Z': # mpmoine_note: non car je veux dans dr_single_levels toutes les dimensions singletons (ex. 'typenatgr'), par seulement les niveaux
vars.py:        # mpmoine: les ajouts ici correspondent  aux single levels Primavera.
vars.py:        # mpmoine_correction:read_extraTable: read_extraTable: ajout de precautions 'NOT-SET' pour certains attributs pour eviter les chaines vides qui font planter XIOS (">  <")
vars.py:                # mpmoine_note: provisoire, on devrait toujours pouvoir associer une spatial shape a des dimensions.
vars.py:                # mpmoine_note: Je rencontre ce cas pour l'instant avec les tables Primavera ou 
vars.py:                # mpmoine_note: on a "latitude|longitude" au lieu de "longitude|latitude"
vars.py:            # mpmoine_future_modif:read_extraTable: introduction de extra_var.sdims, ajout lecture des dimensions dans 
vars.py:            # mpmoine_future_modif:read_extraTable: une table de coordinates quand pas trouvees dans la DR
vars.py:            # mpmoine_future_modif: read_extraTable: suppression de extra_var.dimids -> elargi avec extra_var.sdims
vars.py:            # mpmoine_future_modif:read_extraTable: on renseigne l'attribut label_without_psuffix (doit etre fait apres la valorisation de sdims)
vars.py:    # mpmoine_last_modif:get_SpatialAndTemporal_Shapes: le try/except n'etait pas la bonne solution
vars.py:# mpmoine_last_modif: process_homeVars: argument supplementaire 'path_extra_tables' et expid au lieu de lset
vars.py:        # mpmoine_last_modif: process_homeVars: ajout du cas type='extra'
vars.py:        # mpmoine_TBD: A mieux gerer avec les orphan_variables ?
vars.py:    # mpmoine_last_modif: spid2label et tmid2label ne sont plus utilises
vars.py:    # mpmoine_future_modif:complement_svar_using_cmorvar: reorganisation des lignes de code
vars.py:    # mpmoine_next_modif:complement_svar_using_cmorvar: gestion d'exception pour l'acces a la 'mipvar'
vars.py:        # mpmoine_correction:complement_svar_using_cmorvar: le long_name doit etre le title de la CMORvar et non pas de la MIPvar
vars.py:        # mpmoine_last_modif:complement_svar_using_cmorvar: on affecte ici svar.dimids (avant: dans create_xios_field_ref)
vars.py:        # mpmoine_last_modif:complement_svar_using_cmorvar: provisoire, pour by-passer le cas d'une CMORvar qui n'a pas de structure associee ('dreqItem_remarks')
vars.py:        # mpmoine_future_modif:complement_svar_using_cmorvar: on ne recherche les dimids que si on a pas affaire a une constante
vars.py:                    # mpmoine_future_modif:complement_svar_using_cmorvar: suppression de svar.dimids -> elargi avec svar.sdims
vars.py:                    # mpmoine_future_modif:complement_svar_using_cmorvar: on rajoute les single levels dans le traitement des dimensions (dimids->all_dimids)
vars.py:                    # mpmoine_correction: Solution de Martin Juckes du 04/05/2017 en utilisant cids necessaire a partir de la version 01.00.08
vars.py:                    # mpmoine_future_modif:complement_svar_using_cmorvar: on rajoute les single levels dans le traitement des dimensions (dimids->all_dimids)  
vars.py:                        # mpmoine_future_modif:complement_svar_using_cmorvar: on valorise svar.sdims avec la fonction get_simpleDim_from_DimId
vars.py:                # mpmoine_correction:complement_svar_using_cmorvar: la levee d'ambiguite par ajour de "_land" par ex., ne doit pas impacter le svar.label
vars.py:                # mpmoine_correction:complement_svar_using_cmorvar: sinon le "_land " se retrouve dans le nom du fichier netcdf
vars.py:    # mpmoine_future_modif:complement_svar_using_cmorvar: on renseigne l'attribut label_without_psuffix (doit etre fait apres la valorisation de sdims)
vars.py:    # mpmoine_further_zoom_modif:complement_svar_using_cmorvar: deplacement de Remove_pSuffix apres la levee d'ambiguite 'where something' (verifie: aucune des variables ambigues n'est demandee en plev)
vars.py:# mpmoine_future_modif: nouvelle fonction Remove_pSuffix
vars.py:    # mpmoine_zoom_modif:Remove_pSuffix: correction de la methode de suppression du suffixe de pression (corrige notamment ta23 -> ta2, 3 etant dans la liste des suffixes)
vars.py:    # mpmoine_correction:write_xios_file_def:Remove_pSuffix: suppression des terminaisons en "Clim" le cas echant
vars.py:                    # mpmoine_a_verifier: certaines de ces chaines n existent pas dans les cell_methods de la DR
